<fly-in class={this.classes()}>
  <div class="content-wrapper">
    <slot/>
  </div>

  <script>
    import Icon from './icon.riot'

    export default class {
      static components = {
        Icon
      }

      classes() {
        return [
          this.state.animate ? '' : 'preload',
          this.props.open ? 'open' : 'closed'
        ].join(' ')
      }

      onBeforeMount(props) {
        document.body.append(this.root)

        this.state = {
          animate: false,
          initial: props.open
        }
      }

      onMounted(props, state) {
        if (this.props.width) {
          this.root.style.setProperty('--fly-in-width', this.props.width)
        }
      }

      onBeforeUpdate(props, state) {
        if (!state.animate && props.open != state.initial) {
          this.update({animate: true})
        }
      }
    }
  </script>
</fly-in>
